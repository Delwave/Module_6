import os
from datetime import datetime
from tkinter import Tk, filedialog, simpledialog, messagebox

# Открываем графическое окно для выбора папки
root = Tk()
root.withdraw()  # Скрываем основное окно

folder_path = filedialog.askdirectory(title="Выберите папку с файлами")

if not folder_path:
    messagebox.showinfo("Отмена", "Папка не выбрана")
    exit()

# Получаем список файлов
files = os.listdir(folder_path)
files = [f for f in files if os.path.isfile(os.path.join(folder_path, f))]

# Выбираем файлы вручную
selected_files = []
for f in files:
    answer = messagebox.askyesno("Выбор файла", f"Обработать файл?\n{f}")
    if answer:
        selected_files.append(f)

if not selected_files:
    messagebox.showinfo("Отмена", "Файлы не выбраны")
    exit()

# Запрашиваем часть названия, которую нужно заменить
old_text = simpledialog.askstring("Замена текста", "Какую часть названия нужно заменить?")
if not old_text:
    messagebox.showinfo("Отмена", "Текст для замены не введен")
    exit()

# Формируем новую дату
new_text = datetime.now().strftime("%Y-%m-%d")  # Формат YYYY-MM-DD

# Переименовываем файлы
for f in selected_files:
    if old_text in f:
        new_name = f.replace(old_text, new_text)
        os.rename(os.path.join(folder_path, f), os.path.join(folder_path, new_name))

messagebox.showinfo("Готово", "Файлы успешно переименованы!")